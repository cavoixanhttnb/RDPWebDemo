{"version":3,"file":"radial-pointer.js","sources":["radial-pointer.js"],"sourcesContent":["import { geometry as geo, drawing } from '@progress/kendo-drawing';\n\nimport { setDefaultOptions, deepExtend } from '../../common';\nimport { ANGULAR_SPEED, DEGREE, DEFAULT_LINE_WIDTH, RADIAL_POINTER } from '../constants';\nimport Pointer from '../pointer';\nimport RadialPointerAnimation from './radial-pointer-animation';\n\nconst CAP_SIZE = 0.05;\nconst { Circle, Group, Path } = drawing;\n\nclass RadialPointer extends Pointer {\n\n    setAngle(angle) {\n        this.elements.transform(geo.transform().rotate(angle, this.center));\n    }\n\n    repaint() {\n        const { scale, options } = this;\n        const oldAngle = scale.slotAngle(options._oldValue);\n        const newAngle = scale.slotAngle(options.value);\n\n        if (options.animation.transitions === false) {\n            this.setAngle(newAngle);\n        } else {\n            new RadialPointerAnimation(this.elements, deepExtend(options.animation, {\n                oldAngle: oldAngle,\n                newAngle: newAngle\n            })).play();\n        }\n    }\n\n    render() {\n        const { scale, options } = this;\n        const elements = new Group();\n\n        if (options.animation !== false) {\n            deepExtend(options.animation, {\n                startAngle: 0,\n                center: scale.arc.center,\n                reverse: scale.options.reverse\n            });\n        }\n\n        elements.append(this._renderNeedle(), this._renderCap());\n\n        this.elements = elements;\n        this.setAngle(DEGREE);\n\n        return elements;\n    }\n\n    reflow(arc) {\n        const center = this.center = arc.center;\n        const radius = this.radius = arc.getRadiusX();\n        const capSize = this.capSize = Math.round(radius * this.options.cap.size);\n\n        this.bbox = geo.Rect.fromPoints(new geo.Point(center.x - capSize, center.y - capSize),\n                                    new geo.Point(center.x + capSize, center.y + capSize));\n    }\n\n    _renderNeedle() {\n        const minorTickSize = this.scale.options.minorTicks.size;\n        const center = this.center;\n        const needleColor = this.options.color;\n\n        const needlePath = new Path({\n            fill: { color: needleColor },\n            stroke: { color: needleColor, width: DEFAULT_LINE_WIDTH }\n        });\n\n        needlePath.moveTo(center.x + this.radius - minorTickSize, center.y)\n                  .lineTo(center.x, center.y - (this.capSize / 2))\n                  .lineTo(center.x, center.y + (this.capSize / 2))\n                  .close();\n\n        return needlePath;\n    }\n\n    _renderCap() {\n        const options = this.options;\n        const capColor = options.cap.color || options.color;\n        const circle = new geo.Circle(this.center, this.capSize);\n\n        const cap = new Circle(circle, {\n            fill: { color: capColor },\n            stroke: { color: capColor }\n        });\n\n        return cap;\n    }\n}\n\nsetDefaultOptions(RadialPointer, {\n    cap: {\n        size: CAP_SIZE\n    },\n    arrow: {\n        width: 16,\n        height: 14\n    },\n    animation: {\n        type: RADIAL_POINTER,\n        duration: ANGULAR_SPEED\n    }\n});\n\nexport default RadialPointer;\n"],"names":["const"],"mappings":"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"}