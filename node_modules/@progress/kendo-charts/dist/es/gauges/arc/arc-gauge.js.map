{"version":3,"file":"arc-gauge.js","sources":["arc-gauge.js"],"sourcesContent":["import RadialGauge from '../radial/radial-gauge';\nimport ArcScale from './arc-scale';\nimport RangePointer from './range-pointer';\n\nimport { deepExtend } from '../../common';\n\n\nclass ArcGauge extends RadialGauge {\n\n    _initTheme(theme) {\n        super._initTheme(theme);\n\n        this.options.color = this.options.color || (this.theme.pointer || {}).color;\n    }\n\n    _createModel() {\n        const options = this.options;\n        const scale = this.scale = new ArcScale(options.scale, this.contextService);\n\n        const pointer = new RangePointer(scale, deepExtend({}, {\n            colors: options.colors,\n            color: options.color,\n            value: options.value,\n            opacity: options.opacity,\n            animation: {\n                transitions: options.transitions\n            }\n        }));\n\n        this.pointers = [ pointer ];\n    }\n\n    _buildPointers(pointers) {\n        for (let i = 0; i < pointers.length; i++) {\n            const current = pointers[i];\n            current.render();\n\n            current.value(current.options.value);\n        }\n    }\n\n    _setValueOptions(value) {\n        this.options.value = value;\n    }\n\n    currentColor() {\n        const pointer = this.pointers[0];\n        if (pointer) {\n            return pointer.currentColor();\n        }\n    }\n\n    centerLabelPosition(width, height) {\n        const size = this.getSize();\n        const center = this.scale.arc.center;\n\n        let left = center.x - width / 2;\n        let top = center.y - height / 2;\n\n        if (width < size.width) {\n            const right = left + width;\n\n            left = Math.max(left, 0);\n\n            if (right > size.width) {\n                left -= right - size.width;\n            }\n        }\n\n        if (height < size.height) {\n            const bbox = this.scale.bbox;\n            const yLimit = bbox.bottomRight().y;\n            const bottom = top + height;\n\n            top = Math.max(top, bbox.origin.y);\n\n            if (bottom > yLimit) {\n                top -= bottom - yLimit;\n            }\n        }\n\n        return {\n            left: left,\n            top: top\n        };\n    }\n}\n\nexport default ArcGauge;"],"names":["super","const","let"],"mappings":"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"}