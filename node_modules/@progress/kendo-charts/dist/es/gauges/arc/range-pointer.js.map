{"version":3,"file":"range-pointer.js","sources":["range-pointer.js"],"sourcesContent":["import { setDefaultOptions, deepExtend, isNumber } from '../../common';\nimport { ANGULAR_SPEED, RADIAL_RANGE_POINTER } from '../constants';\nimport Pointer from '../pointer';\nimport RangePointerAnimation from './range-pointer-animation';\n\nclass RangePointer extends Pointer {\n\n    repaint() {\n        const { scale, options } = this;\n        const oldAngle = scale.slotAngle(options._oldValue);\n        const newAngle = scale.slotAngle(options.value);\n\n        if (this.animation) {\n            this.animation.abort();\n        }\n\n        if (options.animation.transitions === false) {\n            this.angle(newAngle);\n            this.stroke(this.currentColor());\n        } else {\n            this.animation = new RangePointerAnimation(this, deepExtend(options.animation, {\n                oldAngle: oldAngle,\n                newAngle: newAngle\n            }));\n\n            this.animation.play();\n        }\n    }\n\n    angle(value) {\n        const geometry = this.elements.geometry();\n        if (this.scale.options.reverse) {\n            geometry.setStartAngle(value);\n        } else {\n            geometry.setEndAngle(value);\n        }\n        this.scale.placeholderRangeAngle(value);\n    }\n\n    stroke(value) {\n        this.elements.stroke(value);\n    }\n\n    render() {\n        if (this.elements) {\n            return;\n        }\n\n        const { scale, options } = this;\n\n        if (options.animation !== false) {\n            deepExtend(options.animation, {\n                startAngle: 0,\n                center: scale.arc.center,\n                reverse: scale.options.reverse\n            });\n        }\n\n        this.elements = scale.addRange(scale.options.min, this.options.value, {\n            color: this.currentColor(),\n            opacity: options.opacity,\n            lineCap: 'round'\n        });\n    }\n\n    currentColor() {\n        const { min, max } = this.scale.options;\n        const { colors, color, value } = this.options;\n        const currentValue = isNumber(value) ? value : min;\n\n        if (colors) {\n            for (let idx = 0; idx < colors.length; idx++) {\n                const { color: rangeColor, from = min, to = max } = colors[idx];\n\n                if (from <= currentValue && currentValue <= to) {\n                    return rangeColor;\n                }\n            }\n        }\n\n        return color;\n    }\n\n    reflow() {\n        this.render();\n\n        this.bbox = this.elements.bbox();\n    }\n}\n\nsetDefaultOptions(RangePointer, {\n    animation: {\n        type: RADIAL_RANGE_POINTER,\n        duration: ANGULAR_SPEED\n    }\n});\n\nexport default RangePointer;\n"],"names":["const","let"],"mappings":"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"}