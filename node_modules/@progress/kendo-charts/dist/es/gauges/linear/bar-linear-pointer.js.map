{"version":3,"file":"bar-linear-pointer.js","sources":["bar-linear-pointer.js"],"sourcesContent":["import { geometry as geo, drawing } from '@progress/kendo-drawing';\nimport { deepExtend, defined } from '../../common';\nimport { X, Y } from '../../common/constants';\nimport LinearPointer from './linear-pointer';\nimport BarLinearPointerAnimation from './bar-linear-pointer-animation';\n\nconst { Group, Path } = drawing;\n\nclass BarLinearPointer extends LinearPointer {\n    constructor(scale, options) {\n        super(scale, options);\n\n        if (!defined(this.options.size)) {\n            this.options.size = this.scale.options.majorTicks.size * 0.3;\n        }\n    }\n\n    pointerShape(value) {\n        const { scale, options } = this;\n        const { mirror, vertical } = scale.options;\n        const dir = mirror === vertical ? -1 : 1;\n        const size = options.size * dir;\n        const minSlot = scale.getSlot(scale.options.min);\n        const slot = scale.getSlot(value);\n        const axis = vertical ? Y : X;\n        const sizeAxis = vertical ? X : Y;\n        const margin = this._margin() * dir;\n\n        const p1 = new geo.Point();\n        p1[axis] = minSlot[axis + \"1\"];\n        p1[sizeAxis] = minSlot[sizeAxis + \"1\"];\n\n        const p2 = new geo.Point();\n        p2[axis] = slot[axis + \"1\"];\n        p2[sizeAxis] = slot[sizeAxis + \"1\"];\n\n        if (vertical) {\n            p1.translate(margin, 0);\n            p2.translate(margin, 0);\n        } else {\n            p1.translate(0, margin);\n            p2.translate(0, margin);\n        }\n\n        const p3 = p2.clone();\n        const p4 = p1.clone();\n\n        if (vertical) {\n            p3.translate(size, 0);\n            p4.translate(size, 0);\n        } else {\n            p3.translate(0, size);\n            p4.translate(0, size);\n        }\n\n        return [ p1, p2, p3, p4 ];\n    }\n\n    repaint() {\n        const { scale, options } = this;\n        const shape = this.pointerShape(options.value);\n        const pointerPath = this.elements.children[0];\n        const oldShape = this.pointerShape(options._oldValue);\n\n        pointerPath.moveTo(shape[0]).lineTo(shape[1]).lineTo(shape[2]).lineTo(shape[3]).close();\n\n        const animation = new BarLinearPointerAnimation(pointerPath, deepExtend(options.animation, {\n            reverse: scale.options.reverse,\n            vertical: scale.options.vertical,\n            oldPoints: [ oldShape[1], oldShape[2] ],\n            newPoints: [ shape[1], shape[2] ]\n        }));\n\n        if (options.animation.transitions === false) {\n            animation.options.duration = 0;\n        }\n\n        animation.setup();\n        animation.play();\n    }\n\n    render() {\n        const group = new Group();\n        const elementOptions = this.getElementOptions();\n\n        const pointer = new Path({\n            stroke: elementOptions.stroke,\n            fill: elementOptions.fill\n        });\n\n        group.append(pointer);\n\n        this.elements = group;\n\n        return group;\n    }\n}\n\nexport default BarLinearPointer;"],"names":["const","super"],"mappings":"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"}