{"version":3,"file":"linear-pointer.js","sources":["linear-pointer.js"],"sourcesContent":["import { setDefaultOptions, deepExtend, defined, getSpacing } from '../../common';\nimport { Box } from '../../core';\nimport { BLACK } from '../../common/constants';\nimport { BAR_POINTER } from '../constants';\nimport Pointer from '../pointer';\n\nclass LinearPointer extends Pointer {\n    constructor(scale, options) {\n        super(scale, options);\n\n        this.options = deepExtend({\n            track: {\n                visible: defined(options.track)\n            }\n        }, this.options);\n    }\n\n    reflow() {\n        const { options, scale } = this;\n        const { mirror, vertical } = scale.options;\n        const scaleLine = scale.lineBox();\n        const trackSize = options.track.size || options.size;\n        const pointerHalfSize = options.size / 2;\n        const margin = getSpacing(options.margin);\n        let space = vertical ?\n                 margin[mirror ? \"left\" : \"right\"] :\n                 margin[mirror ? \"bottom\" : \"top\"];\n        let pointerBox, pointerRangeBox, trackBox;\n\n        space = mirror ? -space : space;\n\n        if (vertical) {\n            trackBox = new Box(\n                scaleLine.x1 + space, scaleLine.y1,\n                scaleLine.x1 + space, scaleLine.y2);\n\n            if (mirror) {\n                trackBox.x1 -= trackSize;\n            } else {\n                trackBox.x2 += trackSize;\n            }\n\n            if (options.shape !== BAR_POINTER) {\n                pointerRangeBox = new Box(\n                    scaleLine.x2 + space, scaleLine.y1 - pointerHalfSize,\n                    scaleLine.x2 + space, scaleLine.y2 + pointerHalfSize\n                );\n                pointerBox = pointerRangeBox;\n            }\n        } else {\n            trackBox = new Box(\n                scaleLine.x1, scaleLine.y1 - space,\n                scaleLine.x2, scaleLine.y1 - space);\n\n            if (mirror) {\n                trackBox.y2 += trackSize;\n            } else {\n                trackBox.y1 -= trackSize;\n            }\n\n            if (options.shape !== BAR_POINTER) {\n                pointerRangeBox = new Box(\n                    scaleLine.x1 - pointerHalfSize, scaleLine.y1 - space,\n                    scaleLine.x2 + pointerHalfSize, scaleLine.y1 - space\n                );\n                pointerBox = pointerRangeBox;\n            }\n        }\n\n        this.trackBox = trackBox;\n        this.pointerRangeBox = pointerRangeBox;\n        this.box = pointerBox || trackBox.clone().pad(options.border.width);\n    }\n\n    getElementOptions() {\n        const options = this.options;\n\n        return {\n            fill: {\n                color: options.color,\n                opacity: options.opacity\n            },\n            stroke: defined(options.border) ? {\n                color: options.border.width ? options.border.color || options.color : \"\",\n                width: options.border.width,\n                dashType: options.border.dashType,\n                opacity: options.opacity\n            } : null\n        };\n    }\n\n    _margin() {\n        const { scale, options } = this;\n        const { mirror, vertical } = scale.options;\n        const margin = getSpacing(options.margin);\n\n        const space = vertical ?\n            margin[mirror ? \"left\" : \"right\"] :\n            margin[mirror ? \"bottom\" : \"top\"];\n\n        return space;\n    }\n}\n\nsetDefaultOptions(LinearPointer, {\n    shape: BAR_POINTER,\n\n    track: {\n        border: {\n            width: 1\n        }\n    },\n\n    color: BLACK,\n    border: {\n        width: 1\n    },\n    opacity: 1,\n\n    margin: getSpacing(3),\n    animation: {\n        type: BAR_POINTER\n    },\n    visible: true\n});\n\nexport default LinearPointer;"],"names":["super","const","let"],"mappings":"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"}