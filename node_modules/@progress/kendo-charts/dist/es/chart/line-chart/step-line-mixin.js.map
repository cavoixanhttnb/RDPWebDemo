{"version":3,"file":"step-line-mixin.js","sources":["step-line-mixin.js"],"sourcesContent":["import { geometry as geom } from '@progress/kendo-drawing';\n\nimport { last } from '../../common';\nimport { X, Y } from '../../common/constants';\n\nconst StepLineMixin = {\n    calculateStepPoints: function(points) {\n        const categoryAxis = this.parent.plotArea.seriesCategoryAxis(this.series);\n        const { justified, vertical, reverse } = categoryAxis.options;\n\n        const stepAxis = vertical ? X : Y;\n        const axis = vertical ? Y : X;\n        const stepDir = reverse ? 2 : 1;\n        const dir = stepDir;\n\n        let previousPoint = toGeometryPoint(points[0], stepAxis, stepDir, axis, dir);\n        const result = [ previousPoint ];\n\n        for (let idx = 1; idx < points.length; idx++) {\n            const point = toGeometryPoint(points[idx], stepAxis, stepDir, axis, dir);\n\n            if (previousPoint[stepAxis] !== point[stepAxis]) {\n                const stepPoint = new geom.Point();\n                stepPoint[stepAxis] = previousPoint[stepAxis];\n                stepPoint[axis] = point[axis];\n\n                result.push(stepPoint, point);\n            }\n\n            previousPoint = point;\n        }\n\n        if (!justified) {\n            result.push(toGeometryPoint(last(points), stepAxis, stepDir, axis, reverse ? 1 : 2));\n        } else if (previousPoint !== last(result)) {\n            result.push(previousPoint);\n        }\n\n        return result;\n\n    }\n};\n\nfunction toGeometryPoint(lintPoint, stepAxis, stepDir, axis, dir) {\n    const box = lintPoint.box;\n    const result = new geom.Point();\n\n    result[stepAxis] = box[stepAxis + stepDir];\n    result[axis] = box[axis + dir];\n\n    return result;\n}\n\nexport default StepLineMixin;"],"names":["const","let"],"mappings":"AAAA,SAAS,QAAQ,IAAI,IAAI,QAAQ,yBAAyB,CAAC;;AAE3D,SAAS,IAAI,QAAQ,cAAc,CAAC;AACpC,SAAS,CAAC,EAAE,CAAC,QAAQ,wBAAwB,CAAC;;AAE9CA,GAAK,CAAC,aAAa,GAAG;IAClB,mBAAmB,EAAE,SAAS,MAAM,EAAE;QAClCA,GAAK,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,kBAAkB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC1E,AAAK,AAAiC,OAAA,GAAG,YAAY,CAAC,OAAO;QAArD,IAAA,SAAS;QAAE,IAAA,QAAQ;QAAE,IAAA,OAAO,eAA9B,AAAW,AAAU,AAAS,AAAyB,AAAC;;QAE9DA,GAAK,CAAC,QAAQ,GAAG,QAAQ,GAAG,CAAC,GAAG,CAAC,CAAC;QAClCA,GAAK,CAAC,IAAI,GAAG,QAAQ,GAAG,CAAC,GAAG,CAAC,CAAC;QAC9BA,GAAK,CAAC,OAAO,GAAG,OAAO,GAAG,CAAC,GAAG,CAAC,CAAC;QAChCA,GAAK,CAAC,GAAG,GAAG,OAAO,CAAC;;QAEpBC,GAAG,CAAC,aAAa,GAAG,eAAe,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC;QAC7ED,GAAK,CAAC,MAAM,GAAG,EAAE,aAAa,EAAE,CAAC;;QAEjC,KAAKC,GAAG,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,MAAM,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE;YAC1CD,GAAK,CAAC,KAAK,GAAG,eAAe,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC;;YAEzE,IAAI,aAAa,CAAC,QAAQ,CAAC,KAAK,KAAK,CAAC,QAAQ,CAAC,EAAE;gBAC7CA,GAAK,CAAC,SAAS,GAAG,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;gBACnC,SAAS,CAAC,QAAQ,CAAC,GAAG,aAAa,CAAC,QAAQ,CAAC,CAAC;gBAC9C,SAAS,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC;;gBAE9B,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;aACjC;;YAED,aAAa,GAAG,KAAK,CAAC;SACzB;;QAED,IAAI,CAAC,SAAS,EAAE;YACZ,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;SACxF,MAAM,IAAI,aAAa,KAAK,IAAI,CAAC,MAAM,CAAC,EAAE;YACvC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;SAC9B;;QAED,OAAO,MAAM,CAAC;;KAEjB;CACJ,CAAC;;AAEF,SAAS,eAAe,CAAC,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE;IAC9DA,GAAK,CAAC,GAAG,GAAG,SAAS,CAAC,GAAG,CAAC;IAC1BA,GAAK,CAAC,MAAM,GAAG,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;;IAEhC,MAAM,CAAC,QAAQ,CAAC,GAAG,GAAG,CAAC,QAAQ,GAAG,OAAO,CAAC,CAAC;IAC3C,MAAM,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC;;IAE/B,OAAO,MAAM,CAAC;CACjB;;AAED,eAAe,aAAa"}