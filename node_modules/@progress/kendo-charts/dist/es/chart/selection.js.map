{"version":3,"file":"selection.js","sources":["selection.js"],"sourcesContent":["import { DomEventsBuilder } from '../services';\n\nimport { DateCategoryAxis, Point } from '../core';\n\nimport { MOUSEWHEEL_DELAY, MOUSEWHEEL, SELECT_START, SELECT, SELECT_END } from './constants';\n\nimport { LEFT, RIGHT, MIN_VALUE, MAX_VALUE } from '../common/constants';\nimport { addClass, Class, removeClass, deepExtend, elementStyles, eventElement, setDefaultOptions, limitValue, round, bindEvents, unbindEvents, mousewheelDelta, hasClasses } from '../common';\nimport { parseDate } from '../date-utils';\n\nconst ZOOM_ACCELERATION = 3;\nconst SELECTOR_HEIGHT_ADJUST = 0.1;\n\nfunction createDiv(className) {\n    const element = document.createElement(\"div\");\n    if (className) {\n        element.className = className;\n    }\n\n    return element;\n}\n\nfunction closestHandle(element) {\n    let current = element;\n    while (current && !hasClasses(current, \"k-handle\")) {\n        current = current.parentNode;\n    }\n\n    return current;\n}\n\nclass Selection extends Class {\n    constructor(chart, categoryAxis, options, observer) {\n        super();\n\n        const chartElement = chart.element;\n\n        this.options = deepExtend({}, this.options, options);\n        this.chart = chart;\n        this.observer = observer;\n        this.chartElement = chartElement;\n        this.categoryAxis = categoryAxis;\n        this._dateAxis = this.categoryAxis instanceof DateCategoryAxis;\n\n        this.initOptions();\n\n        if (this.options.visible) {\n            this.createElements();\n\n            this.set(this._index(this.options.from), this._index(this.options.to));\n\n            this.bindEvents();\n        }\n    }\n\n    onPane(pane) {\n        return this.categoryAxis.pane === pane;\n    }\n\n    createElements() {\n        const options = this.options;\n        const wrapper = this.wrapper = createDiv(\"k-selector\");\n        elementStyles(wrapper, {\n            top: options.offset.top,\n            left: options.offset.left,\n            width: options.width,\n            height: options.height,\n            direction: 'ltr'\n        });\n        const selection = this.selection = createDiv(\"k-selection\");\n        this.leftMask = createDiv(\"k-mask\");\n        this.rightMask = createDiv(\"k-mask\");\n\n        wrapper.appendChild(this.leftMask);\n        wrapper.appendChild(this.rightMask);\n        wrapper.appendChild(selection);\n\n        selection.appendChild(createDiv(\"k-selection-bg\"));\n\n        const leftHandle = this.leftHandle = createDiv(\"k-handle k-left-handle\");\n        const rightHandle = this.rightHandle = createDiv(\"k-handle k-right-handle\");\n        leftHandle.appendChild(createDiv());\n        rightHandle.appendChild(createDiv());\n\n        selection.appendChild(leftHandle);\n        selection.appendChild(rightHandle);\n\n        this.chartElement.appendChild(wrapper);\n        const selectionStyles = elementStyles(selection, [ \"borderLeftWidth\", \"borderRightWidth\", \"height\" ]);\n        const leftHandleHeight = elementStyles(leftHandle, \"height\").height;\n        const rightHandleHeight = elementStyles(rightHandle, \"height\").height;\n\n        options.selection = {\n            border: {\n                left: selectionStyles.borderLeftWidth,\n                right: selectionStyles.borderRightWidth\n            }\n        };\n\n        elementStyles(leftHandle, {\n            top: (selectionStyles.height - leftHandleHeight) / 2\n        });\n\n        elementStyles(rightHandle, {\n            top: (selectionStyles.height - rightHandleHeight) / 2\n        });\n\n        wrapper.style.cssText = wrapper.style.cssText;\n    }\n\n    bindEvents() {\n        if (this.options.mousewheel !== false) {\n            this._mousewheelHandler = this._mousewheel.bind(this);\n            bindEvents(this.wrapper, {\n                [ MOUSEWHEEL ]: this._mousewheelHandler\n            });\n        }\n\n        this._domEvents = DomEventsBuilder.create(this.wrapper, {\n            start: this._start.bind(this),\n            move: this._move.bind(this),\n            end: this._end.bind(this),\n            tap: this._tap.bind(this),\n            press: this._press.bind(this),\n            gesturestart: this._gesturestart.bind(this),\n            gesturechange: this._gesturechange.bind(this),\n            gestureend: this._gestureend.bind(this)\n        });\n    }\n\n    initOptions() {\n        const { options, categoryAxis } = this;\n        const box = categoryAxis.pane.chartsBox();\n        const intlService = this.chart.chartService.intl;\n\n        if (this._dateAxis) {\n            deepExtend(options, {\n                min: parseDate(intlService, options.min),\n                max: parseDate(intlService, options.max),\n                from: parseDate(intlService, options.from),\n                to: parseDate(intlService, options.to)\n            });\n        }\n\n        const { paddingLeft, paddingTop } = elementStyles(this.chartElement, [ \"paddingLeft\", \"paddingTop\" ]);\n\n        this.options = deepExtend({}, {\n            width: box.width(),\n            height: box.height() + SELECTOR_HEIGHT_ADJUST, //workaround for sub-pixel hover on the paths in chrome\n            padding: {\n                left: paddingLeft,\n                top: paddingTop\n            },\n            offset: {\n                left: box.x1 + paddingLeft,\n                top: box.y1 + paddingTop\n            },\n            from: options.min,\n            to: options.max\n        }, options);\n    }\n\n    destroy() {\n        if (this._domEvents) {\n            this._domEvents.destroy();\n            delete this._domEvents;\n        }\n\n        clearTimeout(this._mwTimeout);\n        this._state = null;\n\n        if (this.wrapper) {\n            if (this._mousewheelHandler) {\n                unbindEvents(this.wrapper, {\n                    [ MOUSEWHEEL ]: this._mousewheelHandler\n                });\n                this._mousewheelHandler = null;\n            }\n            this.chartElement.removeChild(this.wrapper);\n            this.wrapper = null;\n        }\n    }\n\n    _rangeEventArgs(range) {\n\n        return {\n            axis: this.categoryAxis.options,\n            from: this._value(range.from),\n            to: this._value(range.to)\n        };\n    }\n\n    _start(e) {\n        const options = this.options;\n        const target = eventElement(e);\n\n        if (this._state || !target) {\n            return;\n        }\n\n        this.chart._unsetActivePoint();\n        this._state = {\n            moveTarget: closestHandle(target) || target,\n            startLocation: e.x ? e.x.location : 0,\n            range: {\n                from: this._index(options.from),\n                to: this._index(options.to)\n            }\n        };\n\n        const args = this._rangeEventArgs({\n            from: this._index(options.from),\n            to: this._index(options.to)\n        });\n\n        if (this.trigger(SELECT_START, args)) {\n            this._state = null;\n        }\n    }\n\n    _press(e) {\n        let handle;\n        if (this._state) {\n            handle = this._state.moveTarget;\n        } else {\n            handle = closestHandle(eventElement(e));\n        }\n        if (handle) {\n            addClass(handle, \"k-handle-active\");\n        }\n    }\n\n    _move(e) {\n        if (!this._state) {\n            return;\n        }\n\n        const { _state: state, options, categoryAxis: { options: axisOptions } } = this;\n        const { range, moveTarget: target } = state;\n        const reverse = axisOptions.reverse;\n        const from = this._index(options.from);\n        const to = this._index(options.to);\n        const min = this._index(options.min);\n        const max = this._index(options.max);\n        const delta = state.startLocation - e.x.location;\n        const oldRange = { from: range.from, to: range.to };\n        const span = range.to - range.from;\n        const scale = elementStyles(this.wrapper, \"width\").width / (axisOptions.categories.length - 1);\n        const offset = Math.round(delta / scale) * (reverse ? -1 : 1);\n\n        if (!target) {\n            return;\n        }\n\n        const leftHandle = hasClasses(target, \"k-left-handle\");\n        const rightHandle = hasClasses(target, \"k-right-handle\");\n\n        if (hasClasses(target, \"k-selection k-selection-bg\")) {\n            range.from = Math.min(\n                Math.max(min, from - offset),\n                max - span\n            );\n            range.to = Math.min(\n                range.from + span,\n                max\n            );\n        } else if ((leftHandle && !reverse) || (rightHandle && reverse)) {\n            range.from = Math.min(\n                Math.max(min, from - offset),\n                max - 1\n            );\n            range.to = Math.max(range.from + 1, range.to);\n        } else if ((leftHandle && reverse) || (rightHandle && !reverse)) {\n            range.to = Math.min(\n                Math.max(min + 1, to - offset),\n                max\n            );\n            range.from = Math.min(range.to - 1, range.from);\n        }\n\n        if (range.from !== oldRange.from || range.to !== oldRange.to) {\n            this.move(range.from, range.to);\n            this.trigger(SELECT, this._rangeEventArgs(range));\n        }\n    }\n\n    _end() {\n        if (this._state) {\n            const moveTarget = this._state.moveTarget;\n            if (moveTarget) {\n                removeClass(moveTarget, \"k-handle-active\");\n            }\n\n            const range = this._state.range;\n            this.set(range.from, range.to);\n            this.trigger(SELECT_END, this._rangeEventArgs(range));\n\n            delete this._state;\n        }\n    }\n\n    _tap(e) {\n        const { options, categoryAxis } = this;\n        const coords = this.chart._eventCoordinates(e);\n        const categoryIx = categoryAxis.pointCategoryIndex(new Point(coords.x, categoryAxis.box.y1));\n        const from = this._index(options.from);\n        const to = this._index(options.to);\n        const min = this._index(options.min);\n        const max = this._index(options.max);\n        const span = to - from;\n        const mid = from + span / 2;\n        const range = {};\n        const rightClick = e.event.which === 3;\n        let offset = Math.round(mid - categoryIx);\n\n        if (this._state || rightClick) {\n            return;\n        }\n\n\n        this.chart._unsetActivePoint();\n\n        if (!categoryAxis.options.justified) {\n            offset--;\n        }\n\n        range.from = Math.min(\n            Math.max(min, from - offset),\n            max - span\n        );\n\n        range.to = Math.min(range.from + span, max);\n\n        this._start(e);\n        if (this._state) {\n            this._state.range = range;\n            this.trigger(SELECT, this._rangeEventArgs(range));\n            this._end();\n        }\n    }\n\n    _mousewheel(e) {\n        let delta = mousewheelDelta(e);\n\n        this._start({ target: this.selection });\n\n        if (this._state) {\n            const range = this._state.range;\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            if (Math.abs(delta) > 1) {\n                delta *= ZOOM_ACCELERATION;\n            }\n\n            if (this.options.mousewheel.reverse) {\n                delta *= -1;\n            }\n\n            if (this.expand(delta)) {\n                this.trigger(SELECT, {\n                    axis: this.categoryAxis.options,\n                    delta: delta,\n                    originalEvent: e,\n                    from: this._value(range.from),\n                    to: this._value(range.to)\n                });\n            }\n\n            if (this._mwTimeout) {\n                clearTimeout(this._mwTimeout);\n            }\n\n            this._mwTimeout = setTimeout(() => {\n                this._end();\n            }, MOUSEWHEEL_DELAY);\n        }\n    }\n\n    _gesturestart(e) {\n        const options = this.options;\n\n        this._state = {\n            range: {\n                from: this._index(options.from),\n                to: this._index(options.to)\n            }\n        };\n        const args = this._rangeEventArgs(this._state.range);\n\n        if (this.trigger(SELECT_START, args)) {\n            this._state = null;\n        } else {\n            e.preventDefault();\n        }\n    }\n\n    _gestureend() {\n        if (this._state) {\n            this.trigger(SELECT_END, this._rangeEventArgs(this._state.range));\n            delete this._state;\n        }\n    }\n\n    _gesturechange(e) {\n        const { chart, _state: state, options, categoryAxis } = this;\n        const range = state.range;\n        const p0 = chart._toModelCoordinates(e.touches[0].x.location).x;\n        const p1 = chart._toModelCoordinates(e.touches[1].x.location).x;\n        const left = Math.min(p0, p1);\n        const right = Math.max(p0, p1);\n\n        e.preventDefault();\n\n        range.from = categoryAxis.pointCategoryIndex(new Point(left)) || options.min;\n\n        range.to = categoryAxis.pointCategoryIndex(new Point(right)) || options.max;\n\n        this.move(range.from, range.to);\n\n        this.trigger(SELECT, this._rangeEventArgs(range));\n    }\n\n    _index(value) {\n        let index = value;\n\n        if (value instanceof Date) {\n            index = this.categoryAxis.categoryIndex(value);\n        }\n\n        return index;\n    }\n\n    _value(index) {\n        const categories = this.categoryAxis.options.categories;\n        let value = index;\n\n        if (this._dateAxis) {\n            if (index > categories.length - 1) {\n                value = this.options.max;\n            } else {\n                value = categories[Math.ceil(index)];\n            }\n        }\n\n        return value;\n    }\n\n    _slot(value) {\n        const categoryAxis = this.categoryAxis;\n        const index = this._index(value);\n\n        return categoryAxis.getSlot(index, index, true);\n    }\n\n    move(from, to) {\n        const options = this.options;\n        const reverse = this.categoryAxis.options.reverse;\n        const { offset, padding, selection: { border } } = options;\n        const left = reverse ? to : from;\n        const right = reverse ? from : to;\n        const edge = 'x' + (reverse ? 2 : 1);\n\n        let box = this._slot(left);\n        const leftMaskWidth = round(box[edge] - offset.left + padding.left);\n\n        elementStyles(this.leftMask, {\n            width: leftMaskWidth\n        });\n        elementStyles(this.selection, {\n            left: leftMaskWidth\n        });\n\n        box = this._slot(right);\n\n        const rightMaskWidth = round(options.width - (box[edge] - offset.left + padding.left));\n        elementStyles(this.rightMask, {\n            width: rightMaskWidth\n        });\n\n        let distance = options.width - rightMaskWidth;\n        if (distance !== options.width) {\n            distance += border.right;\n        }\n\n        elementStyles(this.rightMask, {\n            left: distance\n        });\n        elementStyles(this.selection, {\n            width: Math.max(options.width - (leftMaskWidth + rightMaskWidth) - border.right, 0)\n        });\n    }\n\n    set(from, to) {\n        const options = this.options;\n        const min = this._index(options.min);\n        const max = this._index(options.max);\n        const fromValue = limitValue(this._index(from), min, max);\n        const toValue = limitValue(this._index(to), fromValue + 1, max);\n\n        if (options.visible) {\n            this.move(fromValue, toValue);\n        }\n\n        options.from = this._value(fromValue);\n        options.to = this._value(toValue);\n    }\n\n    expand(delta) {\n        const options = this.options;\n        const min = this._index(options.min);\n        const max = this._index(options.max);\n        const zDir = options.mousewheel.zoom;\n        const from = this._index(options.from);\n        const to = this._index(options.to);\n        let range = { from: from, to: to };\n        const oldRange = deepExtend({}, range);\n\n        if (this._state) {\n            range = this._state.range;\n        }\n\n        if (zDir !== RIGHT) {\n            range.from = limitValue(\n                limitValue(from - delta, 0, to - 1),\n                min, max\n            );\n        }\n\n        if (zDir !== LEFT) {\n            range.to = limitValue(\n                limitValue(to + delta, range.from + 1, max),\n                min,\n                max\n             );\n        }\n\n        if (range.from !== oldRange.from || range.to !== oldRange.to) {\n            this.set(range.from, range.to);\n            return true;\n        }\n    }\n\n    trigger(name, args) {\n        return (this.observer || this.chart).trigger(name, args);\n    }\n}\n\nsetDefaultOptions(Selection, {\n    visible: true,\n    mousewheel: {\n        zoom: \"both\"\n    },\n    min: MIN_VALUE,\n    max: MAX_VALUE\n});\n\nexport default Selection;\n"],"names":["const","let","super","this"],"mappings":"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"}