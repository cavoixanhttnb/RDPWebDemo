{"version":3,"file":"cluster-layout.js","sources":["cluster-layout.js"],"sourcesContent":["import { ChartElement } from '../../core';\n\nimport { X, Y } from '../../common/constants';\nimport { setDefaultOptions } from '../../common';\nimport { forEach, forEachReverse } from './utils';\n\nclass ClusterLayout extends ChartElement {\n    constructor(options) {\n        super(options);\n\n        this.forEach = options.rtl ? forEachReverse : forEach;\n    }\n\n    reflow(box) {\n        const { vertical, gap, spacing } = this.options;\n        const children = this.children;\n        const count = children.length;\n        const axis = vertical ? Y : X;\n        const slots = count + gap + (spacing * (count - 1));\n        const slotSize = (vertical ? box.height() : box.width()) / slots;\n        let position = box[axis + 1] + slotSize * (gap / 2);\n\n        this.forEach(children, (child, idx) => {\n            const childBox = (child.box || box).clone();\n\n            childBox[axis + 1] = position;\n            childBox[axis + 2] = position + slotSize;\n\n            child.reflow(childBox);\n            if (idx < count - 1) {\n                position += (slotSize * spacing);\n            }\n\n            position += slotSize;\n        });\n    }\n}\n\nsetDefaultOptions(ClusterLayout, {\n    vertical: false,\n    gap: 0,\n    spacing: 0\n});\n\nexport default ClusterLayout;"],"names":["super","const","let"],"mappings":"AAAA,SAAS,YAAY,QAAQ,YAAY,CAAC;;AAE1C,SAAS,CAAC,EAAE,CAAC,QAAQ,wBAAwB,CAAC;AAC9C,SAAS,iBAAiB,QAAQ,cAAc,CAAC;AACjD,SAAS,OAAO,EAAE,cAAc,QAAQ,SAAS,CAAC;;AAElD,IAAM,aAAa,GAAqB;IAAC,AACrC,sBAAW,CAAC,OAAO,EAAE;QACjBA,YAAK,KAAA,CAAC,MAAA,OAAO,CAAC,CAAC;;QAEf,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,GAAG,GAAG,cAAc,GAAG,OAAO,CAAC;KACzD;;;;wDAAA;;IAED,wBAAA,MAAM,mBAAA,CAAC,GAAG,EAAE;QACR,AAAK,AAA2B,OAAA,GAAG,IAAI,CAAC,OAAO;QAAvC,IAAA,QAAQ;QAAE,IAAA,GAAG;QAAE,IAAA,OAAO,eAAxB,AAAU,AAAK,AAAS,AAAiB,AAAC;QAChDC,GAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC/BA,GAAK,CAAC,KAAK,GAAG,QAAQ,CAAC,MAAM,CAAC;QAC9BA,GAAK,CAAC,IAAI,GAAG,QAAQ,GAAG,CAAC,GAAG,CAAC,CAAC;QAC9BA,GAAK,CAAC,KAAK,GAAG,KAAK,GAAG,GAAG,GAAG,CAAC,OAAO,GAAG,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;QACpDA,GAAK,CAAC,QAAQ,GAAG,CAAC,QAAQ,GAAG,GAAG,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC,KAAK,EAAE,CAAC,GAAG,KAAK,CAAC;QACjEC,GAAG,CAAC,QAAQ,GAAG,GAAG,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,QAAQ,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;;QAEpD,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,SAAA,CAAC,KAAK,EAAE,GAAG,EAAE,AAAG;YACnCD,GAAK,CAAC,QAAQ,GAAG,CAAC,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC;;YAE5C,QAAQ,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC;YAC9B,QAAQ,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,QAAQ,GAAG,QAAQ,CAAC;;YAEzC,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;YACvB,IAAI,GAAG,GAAG,KAAK,GAAG,CAAC,EAAE;gBACjB,QAAQ,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,CAAC;aACpC;;YAED,QAAQ,IAAI,QAAQ,CAAC;SACxB,CAAC,CAAC;KACN,CAAA,AACJ;;;EA9B2B,YA8B3B,GAAA;;AAED,iBAAiB,CAAC,aAAa,EAAE;IAC7B,QAAQ,EAAE,KAAK;IACf,GAAG,EAAE,CAAC;IACN,OAAO,EAAE,CAAC;CACb,CAAC,CAAC;;AAEH,eAAe,aAAa"}