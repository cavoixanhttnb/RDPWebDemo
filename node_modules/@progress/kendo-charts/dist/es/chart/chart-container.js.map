{"version":3,"file":"chart-container.js","sources":["chart-container.js"],"sourcesContent":["import { drawing as draw } from '@progress/kendo-drawing';\n\nimport { ChartElement } from '../core';\n\nclass ChartContainer extends ChartElement {\n    constructor(options, pane) {\n        super(options);\n        this.pane = pane;\n    }\n\n    shouldClip() {\n        const children = this.children;\n        const length = children.length;\n\n        for (let i = 0; i < length; i++) {\n            if (children[i].options.clip === true) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    _clipBox() {\n        return this.pane.chartsBox();\n    }\n\n    createVisual() {\n        this.visual = new draw.Group({\n            zIndex: 0\n        });\n\n        if (this.shouldClip()) {\n            const clipBox = this.clipBox = this._clipBox();\n            const clipRect = clipBox.toRect();\n            const clipPath = draw.Path.fromRect(clipRect);\n\n            this.visual.clip(clipPath);\n            this.unclipLabels();\n        }\n    }\n\n    stackRoot() {\n        return this;\n    }\n\n    unclipLabels() {\n        const { children: charts, clipBox } = this;\n\n        for (let i = 0; i < charts.length; i++) {\n            const points = charts[i].points || {};\n            const length = points.length;\n\n            for (let j = 0; j < length; j++) {\n                const point = points[j];\n                if (point && point.visible !== false && point.overlapsBox && point.overlapsBox(clipBox)) {\n                    if (point.unclipElements) {\n                        point.unclipElements();\n                    } else {\n                        const { label, note } = point;\n\n                        if (label && label.options.visible) {\n                            if (label.alignToClipBox) {\n                                label.alignToClipBox(clipBox);\n                            }\n                            label.options.noclip = true;\n                        }\n\n                        if (note && note.options.visible) {\n                            note.options.noclip = true;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    destroy() {\n        super.destroy();\n\n        delete this.parent;\n    }\n}\n\nChartContainer.prototype.isStackRoot = true;\n\nexport default ChartContainer;"],"names":["super","const","let"],"mappings":"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"}